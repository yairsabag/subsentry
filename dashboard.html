<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SubSentry Pro Dashboard</title>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --accent: #8b5cf6; --teal: #06b6d4; --text: #f8fafc; --muted: #94a3b8; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; height: 100vh; overflow: hidden; }
        .sidebar { width: 260px; background: var(--card); padding: 30px 20px; border-right: 1px solid #334155; display: flex; flex-direction: column; gap: 10px; }
        .nav-item { padding: 12px; border-radius: 12px; color: var(--muted); cursor: pointer; text-align: left; background: none; border: none; font-weight: 600; }
        .nav-item.active { background: var(--accent); color: white; }
        .main-content { flex: 1; padding: 40px; overflow-y: auto; }
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .card { background: var(--card); border-radius: 24px; padding: 25px; border: 1px solid #334155; }
        .stat-card .value { font-size: 32px; font-weight: 800; margin-top: 10px; display: block; }
        .chart-main { grid-column: span 3; min-height: 350px; }
        .chart-side { grid-column: span 1; min-height: 350px; }
        .wide-card { grid-column: span 4; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: left; color: var(--muted); font-size: 11px; padding: 15px; border-bottom: 1px solid #334155; }
        td { padding: 15px; border-bottom: 1px solid #334155; }
        .cat-badge { background: #334155; padding: 4px 10px; border-radius: 6px; font-size: 12px; }
        .del-btn { color: #ef4444; background: none; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <div class="sidebar">
        <div style="display:flex; align-items:center; gap:10px; margin-bottom:20px;"><img src="icon.png" width="35"><h2>SubSentry</h2></div>
        <button class="nav-item active">ðŸ“Š Analytics</button>
        <button class="nav-item">ðŸ“‹ Subscriptions</button>
        <select id="baseCurrency" style="background:#0f172a; color:white; padding:10px; border-radius:10px; margin-top:10px;">
            <option value="â‚ª">NIS (â‚ª)</option>
            <option value="$">USD ($)</option>
        </select>
        <button id="exportBtn" style="margin-top:auto; background:#334155; color:white; padding:12px; border-radius:12px; border:none; cursor:pointer;">ðŸ“¥ Export CSV</button>
    </div>
    <div class="main-content">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:30px;">
            <div><h1 id="user-name-title">Hello!</h1><p id="user-email-display" style="color:var(--muted);"></p></div>
            <div id="current-date" style="font-weight:700; color:var(--teal);"></div>
        </div>
        <div class="grid">
            <div class="card stat-card"><span>MONTHLY TOTAL</span><span class="value" id="total-spend">â‚ª0.00</span></div>
            <div class="card stat-card"><span>ACTIVE SUBS</span><span class="value" id="active-subs">0</span></div>
            <div class="card stat-card"><span>ANNUAL ESTIMATE</span><span class="value" id="annual-spend">â‚ª0.00</span></div>
            <div class="card stat-card"><div id="usage-info"></div></div>
            <div class="card chart-main"><canvas id="mainChart"></canvas></div>
            <div class="card chart-side"><canvas id="distChart"></canvas></div>
            <div class="card chart-main" style="grid-column: span 3;"><h3>ðŸ’¡ SMART INSIGHTS</h3><div id="insights-content"></div></div>
            <div class="card chart-side"><canvas id="catChart"></canvas></div>
            <div class="card wide-card">
                <div class="add-sub-row" style="display:flex; gap:10px;">
                    <input type="text" id="dashNameIn" placeholder="Service Name" style="background:#0f172a; border:1px solid #334155; padding:10px; color:white; border-radius:10px; flex:1;">
                    <input type="text" id="dashPriceIn" placeholder="Price" style="background:#0f172a; border:1px solid #334155; padding:10px; color:white; border-radius:10px; flex:1;">
                    <select id="dashCatIn" style="background:#0f172a; border:1px solid #334155; padding:10px; color:white; border-radius:10px;"><option value="Streaming">Streaming</option></select>
                    <input type="number" id="dashTrialIn" placeholder="Trial" style="background:#0f172a; border:1px solid #334155; padding:10px; color:white; border-radius:10px;">
                    <button id="dashSaveBtn" style="background:var(--accent); color:white; border:none; padding:10px 20px; border-radius:10px; cursor:pointer;">+ Add</button>
                </div>
                <table>
                    <thead><tr><th>Service</th><th>Category</th><th>Price</th><th>Trial</th><th>Action</th></tr></thead>
                    <tbody id="subs-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>
    <script src="chart.js"></script>
    <script src="dashboard.js"></script>
</body>
</html>